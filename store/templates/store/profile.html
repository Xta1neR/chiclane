{% extends "store/base.html" %}
{% block title %}My Profile{% endblock %}
{% block content %}
<h1 class="text-2xl mb-6">My Account</h1>

<!-- Account Info -->
<section class="mb-8 p-6 bg-white rounded shadow">
  <h2 class="text-xl font-semibold mb-4">Account Details</h2>
  <form method="post">
    {% csrf_token %}
    <div class="space-y-4">
      <div class="form-group">
        {{ form.full_name.label_tag }}
        {{ form.full_name }}
      </div>
      <div class="form-group">
        {{ form.phone_number.label_tag }}
        {{ form.phone_number }}
      </div>
      <div class="form-group">
        {{ form.address.label_tag }}
        {{ form.address }}
      </div>
      <button type="submit" class="btn-gold mt-4">Save Changes</button>
    </div>
  </form>
</section>

<!-- Orders -->
<section id="orders" class="mb-8 p-6 bg-white rounded shadow">
  <h2 class="text-xl font-semibold mb-4">Orders</h2>
  {% if orders %}
    <ul class="space-y-3">
  {% for o in orders %}
    <li class="card p-4 flex justify-between items-center hover:bg-gray-50 cursor-pointer"
        onclick="window.location.href='{% url 'store:user_order_detail' o.id %}'">
      <div>
        <div class="font-semibold">Order {{ o.order_number }}</div>
        <div class="text-sm text-gray-600">Placed on {{ o.created_at|date:"d M Y H:i" }}</div>
      </div>
      <div class="text-right">
        <div class="font-bold">â‚¹{{ o.total }}</div>
        <div class="text-sm">{{ o.status }}</div>
      </div>
    </li>
  {% endfor %}
</ul>

  {% else %}
    <p>No orders yet.</p>
  {% endif %}
</section>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    if(window.location.hash === "#orders") {
      const ordersSection = document.querySelector("#orders");
      if(ordersSection) {
        ordersSection.scrollIntoView({ behavior: 'smooth' });
      }
    }
  });
</script>

{% endblock %}
