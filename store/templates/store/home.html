{% extends "store/base.html" %}
{% block title %}Home{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="relative h-[500px] ">
  <div class="swiper mySwiper h-full">
    <div class="swiper-wrapper">
      <!-- Slide 1 -->
      <div class="swiper-slide bg-cover bg-center" style="background-image: url('https://theadultman.com/wp-content/uploads/2016/09/mens-fashion-from-a-female-perspective-1.jpg');">
        <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center">
          <div class="text-center text-white">
            <h1 class="text-5xl font-playfair font-bold mb-4">ChicLane</h1>
            <p class="text-xl mb-6">Luxury clothing for every moment</p>
            <a href="{% url 'store:product_list' %}" class="px-8 py-3 bg-yellow-400 text-black rounded hover:bg-yellow-500 transition-all font-semibold">Shop Now</a>
          </div>
        </div>
      </div>
      <!-- Slide 2 -->
      <div class="swiper-slide bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1483985988355-763728e1935b?fm=jpg&q=60&w=3000&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8ZmFzaGlvbnxlbnwwfHwwfHx8MA%3D%3D');">
        <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center">
          <div class="text-center text-white">
            <h1 class="text-5xl font-playfair font-bold mb-4">New Arrivals</h1>
            <p class="text-xl mb-6">Trendy outfits for every season</p>
            <a href="{% url 'store:product_list' %}" class="px-8 py-3 bg-yellow-400 text-black rounded hover:bg-yellow-500 transition-all font-semibold">Shop Now</a>
          </div>
        </div>
      </div>
      <!-- Slide 3 -->
      <div class="swiper-slide bg-cover bg-center" style="background-image: url('https://plus.unsplash.com/premium_photo-1671198905435-20f8d166efb2?fm=jpg&q=60&w=3000&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8dmludGFnZSUyMGZhc2hpb258ZW58MHx8MHx8fDA%3D');">
        <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center">
          <div class="text-center text-white">
            <h1 class="text-5xl font-playfair font-bold mb-4">Exclusive Collection</h1>
            <p class="text-xl mb-6">Elegance in every detail</p>
            <a href="{% url 'store:product_list' %}" class="px-8 py-3 bg-yellow-400 text-black rounded hover:bg-yellow-500 transition-all font-semibold">Shop Now</a>
          </div>
        </div>
      </div>
      <!-- Slide 4 -->
      <div class="swiper-slide bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1570875625565-4aaf02f5655f?fm=jpg&q=60&w=3000&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8ZHJlc3MlMjBzaG9wfGVufDB8fDB8fHww');">
        <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center">
          <div class="text-center text-white">
            <h1 class="text-5xl font-playfair font-bold mb-4">Season Sale</h1>
            <p class="text-xl mb-6">Grab your favorite outfits now</p>
            <a href="{% url 'store:product_list' %}" class="px-8 py-3 bg-yellow-400 text-black rounded hover:bg-yellow-500 transition-all font-semibold">Shop Now</a>
          </div>
        </div>
      </div>
    </div>
    <div class="swiper-pagination"></div>
  </div>
</section>

<!-- Swiper CSS & JS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css" />
<script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>

<script>
  // Hero Section Swiper
  const heroSwiper = new Swiper('.mySwiper', {
    loop: true,
    autoplay: { delay: 2000, disableOnInteraction: false },
    effect: 'fade',
    fadeEffect: { crossFade: true },
    pagination: { el: '.swiper-pagination', clickable: true },
  });

  // Category Swipers
  document.addEventListener("DOMContentLoaded", function () {
    document.querySelectorAll('.categorySwiper').forEach(swiperEl => {
      new Swiper(swiperEl, {
        loop: true,
        autoplay: { delay: 2000, disableOnInteraction: false },
        // CHANGE EFFECT TYPE HERE
        effect: 'cube',  
        cubeEffect: { shadow: false, slideShadows: false },
      });
    });
  });
</script>

<!-- Featured Categories -->
<section class="py-16">
  <h2 class="text-4xl font-playfair font-bold text-center mb-12" data-aos="fade-up">Shop by Category</h2>
  <div class="grid grid-cols-1 md:grid-cols-3 gap-8 px-4 md:px-0">
    {% for cat in top_categories %}
      <a href="{% url 'store:category_products' cat.slug %}" class="group rounded-lg shadow-lg transform hover:scale-105 transition-all" data-aos="zoom-in" data-aos-delay="{{ forloop.counter0|add:'100' }}">
        
        {% if cat.images.all %}
          <div class="swiper categorySwiper h-64 relative overflow-hidden rounded-lg">
            <div class="swiper-wrapper">
              {% for img in cat.images.all %}
                <div class="swiper-slide relative">
                  <img src="{{ img.image.url }}" class="w-full h-64 object-cover" alt="{{ cat.name }}">
                  <!-- Overlay inside each slide -->
                  <div class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-30 opacity-0 group-hover:opacity-100 transition-opacity duration-500">
                    <h3 class="text-white text-3xl font-bold">{{ cat.name }}</h3>
                  </div>
                </div>
              {% endfor %}
            </div>
          </div>
        {% elif cat.products.first and cat.products.first.images.all %}
          <div class="relative h-64 overflow-hidden rounded-lg">
            <img src="{{ cat.products.first.images.all.0.image.url }}" class="w-full h-64 object-cover transition-transform duration-500 group-hover:scale-110" alt="{{ cat.name }}">
            <div class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-30 opacity-0 group-hover:opacity-100 transition-opacity duration-500">
              <h3 class="text-white text-2xl font-bold">{{ cat.name }}</h3>
            </div>
          </div>
        {% else %}
          <div class="relative h-64 overflow-hidden rounded-lg">
            <img src="https://via.placeholder.com/800x600?text={{ cat.name }}" class="w-full h-64 object-cover transition-transform duration-500 group-hover:scale-110" alt="{{ cat.name }}">
            <div class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-30 opacity-0 group-hover:opacity-100 transition-opacity duration-500">
              <h3 class="text-white text-2xl font-bold">{{ cat.name }}</h3>
            </div>
          </div>
        {% endif %}

      </a>
    {% empty %}
      <p class="text-center col-span-3 text-gray-500">No categories available.</p>
    {% endfor %}
  </div>
</section>


<!-- Featured Products Slider -->
<section class="py-16 bg-gradient-to-b from-gray-50 via-gray-100 to-gray-50">
  <h2 class="text-4xl font-playfair font-bold text-center mb-12" data-aos="fade-up">Best Sellers</h2>
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8 px-4 md:px-0">
    {% for product in featured_products %}
      <a href="{% url 'store:product_detail' product.slug %}" class="group relative block rounded-xl overflow-hidden shadow-xl transform transition-all hover:scale-105 hover:shadow-2xl">
        {% if product.images.all %}
          <img src="{{ product.images.all.0.image.url }}" class="w-full h-64 object-cover transition-transform duration-500 group-hover:scale-110" alt="{{ product.name }}">
        {% else %}
          <img src="https://via.placeholder.com/400x300?text=No+Image" class="w-full h-64 object-cover transition-transform duration-500 group-hover:scale-110" alt="{{ product.name }}">
        {% endif %}
        
        <!-- Featured Badge -->
        <div class="absolute top-3 left-3 px-2 py-1 bg-yellow-400 text-black text-xs font-semibold rounded shadow-md">Featured</div>

        <!-- Hover overlay -->
        <div class="absolute inset-0 bg-black bg-opacity-30 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col items-center justify-center text-center p-4">
          <h3 class="text-white text-lg font-bold mb-2">{{ product.name }}</h3>
          <span class="text-yellow-400 font-semibold text-lg mb-3">â‚¹{{ product.get_price }}</span>
          <span class="inline-block px-4 py-2 bg-yellow-400 text-black rounded font-semibold text-sm hover:bg-yellow-500 transition-colors">View Product</span>
        </div>

      </a>
    {% empty %}
      <p class="text-center col-span-4 text-gray-500">No featured products available.</p>
    {% endfor %}
  </div>
</section>

{% endblock %}
